<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: sans-serif;
      padding: 20px;
      direction: rtl;
      position: relative;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 20px;
    }
    .triangle-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .box {
      background-color: #222;
      padding: 30px;
      border-radius: 20px;
      width: 200px;
      text-align: center;
      box-shadow: 0 0 8px #00f, inset 0 0 10px #00f;
      font-size: 20px;
    }
    input {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: none;
      background-color: #333;
      color: white;
      font-size: 18px;
      text-align: center;
      margin-top: 10px;
    }
    button {
      background-color: blue;
      border: none;
      color: white;
      font-size: 20px;
      padding: 12px 30px;
      border-radius: 20px;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
      box-shadow: 0 0 15px blue;
    }
    button:hover {
      background-color: #0044cc;
    }
    #stockTable {
      margin-top: 30px;
      width: 100%;
      border-collapse: collapse;
    }
    #stockTable th, #stockTable td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    #stockTable th {
      background-color: #222;
    }
    #stockTable td {
      background-color: #333;
    }
    .summary {
      margin-top: 20px;
      font-size: 20px;
      text-align: center;
    }
    #menu-btn {
      font-size: 28px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 5px 10px;
    }
    #menu {
      display: none;
      background: #222;
      border: 1px solid #444;
      padding: 10px;
      position: absolute;
      top: 40px;
      left: 10px;
      z-index: 9999;
      border-radius: 10px;
      min-width: 150px;
    }
    #menu a {
      display: block;
      color: white;
      text-decoration: none;
      margin-bottom: 5px;
      text-align: right;
      font-size: 16px;
      padding: 5px 10px;
      border-radius: 6px;
    }
    #menu a:hover {
      background-color: #444;
    }
    .action-btn {
      margin: 2px;
      padding: 5px 10px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
    .edit-btn {
      background-color: orange;
      color: white;
    }
    .delete-btn {
      background-color: red;
      color: white;
    }
  </style>
</head>
<body>

  <button id="menu-btn" onclick="toggleMenu()">â‹®</button>
  <div id="menu">
    <a href="index.html">ğŸ  Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="sales.html">ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a>
    <a href="stock.html">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</a>
  </div>

  <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h1>

  <div class="triangle-container">
    <div class="box">
      Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬
      <input type="text" id="nameInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø´Ø§Ø­Ù† Ø³Ø§Ù…Ø³ÙˆÙ†Øº" />
    </div>
    <div class="box">
      Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡
      <input type="number" id="costInput" min="1" placeholder="Ù…Ø«Ù„Ø§Ù‹: 15000" />
    </div>
    <div class="box">
      Ø§Ù„ÙƒÙ…ÙŠØ©
      <input type="number" id="stockInput" min="1" placeholder="Ù…Ø«Ù„Ø§Ù‹: 10" />
    </div>
  </div>

  <button onclick="addProduct()">Ø§Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>

  <table id="stockTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
        <th>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>
        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
        <th>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</th>
        <th>Ø®ÙŠØ§Ø±Ø§Øª</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="summary">
    Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ø¨Ø¶Ø§Ø¹Ø©: <span id="totalValue">0</span> Ù„.Ø³
  </div>

  <script>
    // Ø¥Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ØŒ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ±
    if (!localStorage.getItem("visitedBefore")) {
      localStorage.setItem("products", JSON.stringify({}));
      localStorage.setItem("visitedBefore", "true");
    }

    let products = JSON.parse(localStorage.getItem("products")) || {};

    function toggleMenu() {
      const menu = document.getElementById("menu");
      menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function saveProducts() {
      localStorage.setItem("products", JSON.stringify(products));
    }

    function updateTable() {
      const tbody = document.querySelector("#stockTable tbody");
      tbody.innerHTML = "";
      let total = 0;

      for (const name in products) {
        const prod = products[name];
        const value = prod.cost * (prod.stock || 0);
        total += value;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${name}</td>
          <td>${prod.cost}</td>
          <td>${prod.stock || 0}</td>
          <td>${value}</td>
          <td>
            <button class="action-btn edit-btn" onclick="editProduct('${name}')">ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="action-btn delete-btn" onclick="deleteProduct('${name}')">Ø­Ø°Ù</button>
          </td>
        `;
        tbody.appendChild(row);
      }

      document.getElementById("totalValue").textContent = total.toFixed(0);
    }

    function addProduct() {
      const name = document.getElementById("nameInput").value.trim();
      const cost = parseFloat(document.getElementById("costInput").value);
      const stock = parseInt(document.getElementById("stockInput").value);

      if (!name || !cost || cost <= 0 || !stock || stock <= 0) {
        alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
        return;
      }

      if (products[name]) {
        products[name].stock += stock;
        products[name].cost = cost; // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ùˆ Ø¯Ø®Ù„ØªÙ‡ Ù…Ù† Ø¬Ø¯ÙŠØ¯
      } else {
        products[name] = { cost: cost, stock: stock };
      }

      saveProducts();
      updateTable();

      document.getElementById("nameInput").value = "";
      document.getElementById("costInput").value = "";
      document.getElementById("stockInput").value = "";
    }

    function editProduct(name) {
      const prod = products[name];
      const newName = prompt("ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:", name);
      if (!newName) return;
      const newCost = parseFloat(prompt("ØªØ¹Ø¯ÙŠÙ„ Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡:", prod.cost));
      if (!newCost || newCost <= 0) return;
      const newStock = parseInt(prompt("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©:", prod.stock));
      if (!newStock || newStock <= 0) return;

      // Ø¥Ø°Ø§ ØºÙŠØ±Ù†Ø§ Ø§Ù„Ø§Ø³Ù…ØŒ Ù†Ø­Ø°Ù Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆÙ†Ø¶ÙŠÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯
      if (newName !== name) {
        delete products[name];
      }
      products[newName] = { cost: newCost, stock: newStock };

      saveProducts();
      updateTable();
    }

    function deleteProduct(name) {
      if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ ${name}ØŸ`)) return;
      delete products[name];
      saveProducts();
      updateTable();
    }

    updateTable();
  </script>
</body>
</html>
