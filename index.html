<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨ÙŠØ¹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: sans-serif;
      padding: 20px;
      direction: rtl;
      position: relative;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 20px;
    }
    .triangle-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .box {
      background-color: #222;
      padding: 30px;
      border-radius: 20px;
      width: 200px;
      text-align: center;
      box-shadow: 0 0 8px #00f, inset 0 0 10px #00f;
      font-size: 20px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: none;
      background-color: #333;
      color: white;
      font-size: 18px;
      text-align: center;
      margin-top: 10px;
    }
    button {
      background-color: blue;
      border: none;
      color: white;
      font-size: 20px;
      padding: 12px 30px;
      border-radius: 20px;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
      box-shadow: 0 0 15px blue;
    }
    button:hover {
      background-color: #0044cc;
    }
    #salesTable {
      margin-top: 30px;
      width: 100%;
      border-collapse: collapse;
    }
    #salesTable th, #salesTable td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    #salesTable th {
      background-color: #222;
    }
    #salesTable td {
      background-color: #333;
    }
    .summary {
      margin-top: 20px;
      font-size: 20px;
      text-align: center;
    }
    #menu-btn {
      font-size: 28px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 5px 10px;
    }
    #menu {
      display: none;
      background: #222;
      border: 1px solid #444;
      padding: 10px;
      position: absolute;
      top: 40px;
      left: 10px;
      z-index: 9999;
      border-radius: 10px;
      min-width: 150px;
    }
    #menu a {
      display: block;
      color: white;
      text-decoration: none;
      margin-bottom: 5px;
      text-align: right;
      font-size: 16px;
      padding: 5px 10px;
      border-radius: 6px;
    }
    #menu a:hover {
      background-color: #444;
    }
  </style>
</head>
<body>

<button id="menu-btn" onclick="toggleMenu()">â‹®</button>
<div id="menu">
  <a href="index.html">ğŸ  Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="sales.html">ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</a>
  <a href="stock.html">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</a>
</div>

<h1>ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨ÙŠØ¹</h1>

<div class="triangle-container">
  <div class="box">
    Ø§Ù„Ù…Ù†ØªØ¬
    <select id="productSelect">
      <option value="">Ø§Ø®ØªØ± Ù…Ù†ØªØ¬</option>
    </select>
  </div>
  <div class="box">
    Ø§Ù„ÙƒÙ…ÙŠØ©
    <input type="number" id="quantityInput" min="1" placeholder="Ù…Ø«Ù„Ø§Ù‹: 2">
  </div>
  <div class="box">
    Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹
    <input type="number" id="priceInput" min="1" placeholder="Ù…Ø«Ù„Ø§Ù‹: 20000">
  </div>
</div>

<button onclick="sellProduct()">Ø§Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ¹</button>

<table id="salesTable">
  <thead>
    <tr>
      <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
      <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
      <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
      <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
      <th>Ø§Ù„Ø±Ø¨Ø­</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="summary">
  Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: <span id="totalSales">0</span> Ù„.Ø³ | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø¨Ø­: <span id="totalProfit">0</span> Ù„.Ø³
</div>

<script>
function toggleMenu() {
  const menu = document.getElementById("menu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

// Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
let products = JSON.parse(localStorage.getItem("products")) || {};
let sales = JSON.parse(localStorage.getItem("sales")) || [];

function populateProducts() {
  const select = document.getElementById("productSelect");
  select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ù…Ù†ØªØ¬</option>';
  for (const name in products) {
    select.innerHTML += `<option value="${name}">${name} (${products[name].stock} Ù…ØªØ¨Ù‚ÙŠ)</option>`;
  }
}
populateProducts();

function updateSalesTable() {
  const tbody = document.querySelector("#salesTable tbody");
  tbody.innerHTML = "";
  let totalSales = 0;
  let totalProfit = 0;

  sales.forEach(sale => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${sale.name}</td>
      <td>${sale.quantity}</td>
      <td>${sale.price}</td>
      <td>${sale.total}</td>
      <td>${sale.profit}</td>
    `;
    tbody.appendChild(row);
    totalSales += sale.total;
    totalProfit += sale.profit;
  });

  document.getElementById("totalSales").textContent = totalSales.toFixed(0);
  document.getElementById("totalProfit").textContent = totalProfit.toFixed(0);
}

function sellProduct() {
  const name = document.getElementById("productSelect").value;
  const quantity = parseInt(document.getElementById("quantityInput").value);
  const price = parseFloat(document.getElementById("priceInput").value);

  if (!name || !quantity || quantity <= 0 || !price || price <= 0) {
    alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
    return;
  }

  if (!products[name] || products[name].stock < quantity) {
    alert("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªÙˆÙØ±");
    return;
  }

  const total = quantity * price;
  const profit = quantity * (price - products[name].cost);

  // Ø®ØµÙ… Ø§Ù„ÙƒÙ…ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
  products[name].stock -= quantity;
  localStorage.setItem("products", JSON.stringify(products));
  populateProducts();

  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ¹
  const sale = { name, quantity, price, total, profit };
  sales.push(sale);
  localStorage.setItem("sales", JSON.stringify(sales));

  updateSalesTable();

  document.getElementById("quantityInput").value = "";
  document.getElementById("priceInput").value = "";
}

updateSalesTable();
</script>

</body>
</html>
