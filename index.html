<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anas Store</title>
<style>
  body {
    background-color: #1e1e1e;
    color: #fff;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }
  header {
    background-color: #111;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header h1 {
    margin: 0;
    font-size: 24px;
    color: #0ff;
  }
  .menu {
    position: relative;
    display: inline-block;
  }
  .menu-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: #222;
    min-width: 160px;
    z-index: 1;
    border-radius: 8px;
    overflow: hidden;
  }
  .menu-content a {
    color: white;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
  }
  .menu-content a:hover {
    background-color: #333;
  }
  .menu:hover .menu-content {
    display: block;
  }
  main {
    padding: 20px;
  }
  .triangle {
    width: 300px;
    height: 300px;
    background: linear-gradient(135deg, #0ff, #f0f);
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    margin: 20px auto;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
  }
  .triangle input, .triangle button {
    width: 80%;
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
    border: none;
  }
  .triangle input {
    text-align: center;
  }
  .save-btn {
    background-color: red;
    color: white;
    cursor: pointer;
    font-weight: bold;
  }
  .stats {
    margin-top: 20px;
    text-align: center;
  }
</style>
</head>
<body>
<header>
  <h1>Anas Store</h1>
  <div class="menu">
    <span>☰</span>
    <div class="menu-content">
      <a href="sales.html">المبيعات</a>
    </div>
  </div>
</header>
<main>
  <div class="triangle">
    <input type="text" id="product" placeholder="اسم المنتج">
    <input type="number" id="quantity" placeholder="العدد">
    <input type="number" id="price" placeholder="سعر القطعة">
    <button class="save-btn" onclick="saveSale()">احفظ</button>
  </div>
  <div class="stats">
    <p>إجمالي المبيعات: <span id="totalSales">0</span></p>
    <p>الربح الصافي: <span id="totalProfit">0</span></p>
  </div>
</main>
<script>
function getSales() {
  let sales = localStorage.getItem('anasStoreSales');
  return sales ? JSON.parse(sales) : [];
}

function saveSalesData(sales) {
  localStorage.setItem('anasStoreSales', JSON.stringify(sales));
}

function saveSale() {
  const product = document.getElementById('product').value;
  const quantity = parseInt(document.getElementById('quantity').value);
  const price = parseFloat(document.getElementById('price').value);
  if (!product || !quantity || !price) {
    alert('الرجاء ملء كل الحقول!');
    return;
  }
  
  let sales = getSales();
  const profit = price * quantity; // افتراض الربح = السعر * الكمية
  const sale = {
    product,
    quantity,
    price,
    profit,
    date: new Date().toISOString()
  };
  sales.push(sale);
  saveSalesData(sales);
  updateStats();
  document.getElementById('product').value = '';
  document.getElementById('quantity').value = '';
  document.getElementById('price').value = '';
}

function updateStats() {
  const sales = getSales();
  const totalSales = sales.reduce((sum, s) => sum + (s.price * s.quantity), 0);
  const totalProfit = sales.reduce((sum, s) => sum + s.profit, 0);
  document.getElementById('totalSales').innerText = totalSales;
  document.getElementById('totalProfit').innerText = totalProfit;
}

updateStats();
</script>
</body>
</html>
